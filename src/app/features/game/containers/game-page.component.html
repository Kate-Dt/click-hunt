<section class="wrap">
  <h1 class="title">Click Hunt</h1>

  <game-controls
    [n]="engine.nMs()"
    [canStart]="engine.canStart()"
    [status]="engine.status()"
    [min]="N_MIN"
    [max]="N_MAX"
    (nChange)="engine.setN($event)"
    (start)="engine.start($event)"
    (reset)="engine.reset()"
  />

  <scoreboard [score]="engine.score()" />

  <game-board [board]="engine.board()" (cellClick)="engine.handleCellClick($event)" />
</section>

<ui-modal
  [open]="engine.status() === 'finished'"
  [title]="engine.getResult()?.winner === 'player' ? 'You win!' : 'Computer wins'"
  (close)="engine.reset()"
>
  <div class="card">
    <h3 class="title">Result</h3>
    <p>Player: {{ engine.score().player }} â€” Computer: {{ engine.score().computer }}</p>

    @if (engine.getStats().avgReactionMs !== null) {
    <p>Average reaction: {{ engine.getStats().avgReactionMs }} ms</p>
    } @if (engine.getStats().bestReactionMs !== null) {
    <p>Best reaction: {{ engine.getStats().bestReactionMs }} ms</p>
    } @if (engine.getStats().worstReactionMs !== null) {
    <p>Worst reaction: {{ engine.getStats().worstReactionMs }} ms</p>
    }

    <div class="actions">
      <button class="primary" type="button" (click)="engine.reset()">Play again</button>
    </div>
  </div>
</ui-modal>
